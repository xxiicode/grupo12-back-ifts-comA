extends layout

block content
  .form-container
    h2 Editar evento

    //- Mongoose usa _id
    form.form(action=`/eventos/editar/${evento._id}` method="post")
      .form-group
        label(for="nombre") Nombre
        input#nombre(type="text" name="nombre" value=evento.nombre required)

      .form-group
        label(for="fecha") Fecha
        //- Formateamos la fecha para el input tipo date
        - const fechaISO = new Date(evento.fecha).toISOString().substring(0,10)
        input#fecha(type="date" name="fecha" value=fechaISO required)

      .form-group
        label(for="lugar") Lugar
        input#lugar(type="text" name="lugar" value=evento.lugar)

      .form-group
        label(for="presupuesto") Presupuesto
        input#presupuesto(type="number" name="presupuesto" value=evento.presupuesto)

      .form-group
        label(for="estado") Estado
        select#estado(name="estado")
          option(value="Planificado" selected=evento.estado=="Planificado") Planificado
          option(value="En curso" selected=evento.estado=="En curso") En curso
          option(value="Finalizado" selected=evento.estado=="Finalizado") Finalizado

      .form-group
        label(for="clienteId") Cliente
        select#clienteId(name="clienteId" required)
          option(value="") -- Seleccionar cliente --
          each c in clientes
            option(
              value=c._id 
              selected=(evento.cliente && evento.cliente._id == c._id)
            ) #{c.nombre}

      .form-actions
        button.btn-primary(type="submit") Guardar cambios
        a.btn-secondary(href="/eventos") Cancelar
